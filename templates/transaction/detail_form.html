{% extends 'base.html' %}
{% load humanize %}

{% block title %}Edit Item Transaksi #{{ transaction.id }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="breadcrumbs text-sm mb-4">
        <ul>
            <li><a href="{% url 'transaction_list' %}">Transaksi</a></li>
            <li><a href="{% url 'transaction_detail' transaction.pk %}">Transaksi #{{ transaction.id }}</a></li>
            <li>Edit Item</li>
        </ul>
    </div>

    <div class="bg-base-100 shadow rounded-box p-6">
        <h2 class="text-2xl font-bold mb-4">Edit Item Transaksi</h2>
        
        <div class="bg-info/10 border border-info rounded p-3 mb-4">
            <p class="text-sm"><strong>Produk:</strong> {{ object.variant.product.name }}</p>
            <p class="text-sm"><strong>SKU:</strong> {{ object.variant.sku }}</p>
        </div>

        <form method="post" class="space-y-4">
            {% csrf_token %}
            
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Quantity</span>
                </label>
                {{ form.qty }}
                {% if form.qty.errors %}
                    <label class="label">
                        <span class="label-text-alt text-error">{{ form.qty.errors.0 }}</span>
                    </label>
                {% endif %}
            </div>

            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Harga</span>
                </label>
                <input type="text" class="input input-bordered" value="Rp {{ object.price|floatformat:0|intcomma }}" disabled>
                <label class="label">
                    <span class="label-text-alt">Harga sudah ditentukan dan tidak bisa diubah</span>
                </label>
            </div>

            <div class="divider"></div>

            <div class="flex gap-2 justify-end">
                <a href="{% url 'transaction_detail' transaction.pk %}" class="btn btn-outline">
                    Batal
                </a>
                <button type="submit" class="btn btn-primary">
                    <i data-lucide="save"></i> Simpan Perubahan
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    });
</script>
{% endblock %}
